(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{100:function(e,t,c){},101:function(e,t,c){},102:function(e,t,c){},103:function(e,t,c){},106:function(e,t,c){},205:function(e,t,c){},206:function(e,t,c){},207:function(e,t,c){},208:function(e,t,c){},213:function(e,t,c){},214:function(e,t,c){},215:function(e,t,c){},216:function(e,t,c){},217:function(e,t,c){},218:function(e,t,c){"use strict";c.r(t);var a=c(1),s=c.n(a),r=c(51),n=c.n(r),i=(c(89),c(6)),l=c(3),o=function(e,t){var c=Object(a.useState)((function(){try{var c=localStorage.getItem(e);return c?JSON.parse(c):t}catch(a){return console.log(a),t}})),s=Object(l.a)(c,2),r=s[0],n=s[1];return[r,function(t){try{localStorage.setItem(e,JSON.stringify(t)),n(t)}catch(c){console.log(c)}}]},j=c(0),d=Object(a.createContext)(),m=function(e){var t=e.children,c=o("user",{_id:"",username:"",email:"",token:""}),a=Object(l.a)(c,2),s=a[0],r=a[1];return Object(j.jsx)(d.Provider,{value:{userData:s,setUserData:r},children:t})},u=d,b=Object(a.createContext)(),h=function(e){var t=e.children,c=Object(a.useState)({}),s=Object(l.a)(c,2),r=s[0],n=s[1];return Object(j.jsx)(b.Provider,{value:{currentArt:r,setCurrentArt:n},children:t})},O=b,x=c(7),A=c.n(x),p=c(11),f=c(4),g="https://iwanttohave.herokuapp.com/api";function v(e){return fetch("".concat(g,"/auth/register"),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(e)}).then((function(e){return e.json()}))}function y(e){return fetch("".concat(g,"/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(e)}).then((function(e){return e.json()}))}function N(){return fetch("".concat(g,"/auth/logout"),{method:"GET",credentials:"include"})}function k(e){return fetch("".concat(g,"/auth/sendMessage"),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(e)}).then((function(e){return e.json()}))}c(92);function w(){var e=Object(i.h)(),t=Object(a.useContext)(u),c=t.userData,s=t.setUserData;function r(){return(r=Object(p.a)(A.a.mark((function t(){return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,N();case 2:200!==t.sent.status?console.log("Logout Error"):(s(""),e("/"));case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(j.jsxs)("header",{children:[Object(j.jsxs)("article",{className:"logo",children:[Object(j.jsx)("li",{children:Object(j.jsx)(f.b,{to:"/",children:Object(j.jsx)("i",{className:"fas fa-handshake"})})}),Object(j.jsx)("li",{className:"userName",children:Object(j.jsxs)(f.b,{to:"/profile",children:[" ",c.username?"Welcome, ".concat(c.username):""]})}),Object(j.jsxs)("div",{className:"dropdown",children:[Object(j.jsxs)("button",{className:"dropbtn",children:["Category",Object(j.jsx)("i",{className:"fas fa-caret-down"})]}),Object(j.jsxs)("div",{className:"dropdown-content",children:[Object(j.jsx)(f.b,{to:"/catalog",children:"All"}),Object(j.jsx)(f.b,{to:"/catalog?name=animals",children:"Animals"}),Object(j.jsx)(f.b,{to:"/catalog/?name=cars",children:"Cars"}),Object(j.jsx)(f.b,{to:"/catalog/?name=clothes",children:"Clothing"})]})]})]}),Object(j.jsx)("nav",{children:Object(j.jsxs)("ul",{className:"nav",children:[Object(j.jsx)("li",{children:Object(j.jsx)(f.b,{to:"/catalog",children:"Catalog"})}),c.username?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("li",{children:Object(j.jsx)(f.b,{to:"/create",children:"Create"})}),Object(j.jsx)("li",{children:Object(j.jsx)(f.b,{to:"/catalog/?name=myArticles",children:"My Articles"})}),Object(j.jsx)("button",{className:"logOutBtn",onClick:function(){return r.apply(this,arguments)},children:"Sign out"})]}):Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("li",{children:Object(j.jsx)(f.b,{to:"/login",children:"Login"})}),Object(j.jsx)("li",{children:Object(j.jsx)(f.b,{to:"/register",children:"Register"})})]})]})})]})}var S=c(8),D=c(9),q=c(13),I=c(14),C=(c(93),function(e){Object(q.a)(c,e);var t=Object(I.a)(c);function c(){return Object(S.a)(this,c),t.apply(this,arguments)}return Object(D.a)(c,[{key:"render",value:function(){return Object(j.jsxs)("div",{className:"footer",children:[Object(j.jsx)("p",{className:"footer-title",children:"Created by Ivan Valkov for SoftUni \xa9"}),Object(j.jsx)("nav",{children:Object(j.jsxs)("ul",{className:"footer-nav-items",children:[Object(j.jsx)("li",{children:Object(j.jsx)("a",{href:"https://www.instagram.com",target:"_blank",rel:"noopener noreferrer",children:Object(j.jsx)("i",{className:"fab fa-instagram"})})}),Object(j.jsx)("li",{children:Object(j.jsx)("a",{href:"https://www.facebook.com",target:"_blank",rel:"noopener noreferrer",children:Object(j.jsx)("i",{className:"fab fa-facebook"})})}),Object(j.jsx)("li",{children:Object(j.jsx)("a",{href:"https://www.linkedin.com",target:"_blank",rel:"noopener noreferrer",children:Object(j.jsx)("i",{className:"fab fa-linkedin"})})}),Object(j.jsx)("li",{children:Object(j.jsx)("a",{href:"https://github.com",target:"_blank",rel:"noopener noreferrer",children:Object(j.jsx)("i",{className:"fab fa-github-square"})})})]})})]})}}]),c}(a.Component)),E=(c(94),c.p+"static/media/homepage.8364f98e.jpg");function F(){return Object(j.jsxs)("section",{className:"homePage",children:[Object(j.jsx)("article",{className:"homePage-img",children:Object(j.jsx)("img",{src:E,alt:""})}),Object(j.jsx)("article",{className:"home-message",children:Object(j.jsxs)("div",{className:"home-text-box",children:[Object(j.jsx)("h1",{className:"home-message-title",children:"I want to have ... everything"}),Object(j.jsx)("p",{className:"home-message-untertitle",children:"The best free trade page !"})]})})]})}var P=c(77),T=c.n(P),B="https://iwanttohave.herokuapp.com/api";function M(e){return fetch("".concat(B,"/products/details/")+e).then((function(e){return e.json()}))}function U(e){return fetch("".concat(B,"/products/create"),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(e)}).then((function(e){return e.json()}))}function L(e){return fetch("".concat(B,"/products/createComment"),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(e)}).then((function(e){return e.json()}))}function Q(e,t){return fetch("".concat(B,"/products/edit/")+e,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)}).then((function(e){return e.json()}))}c(96);function K(e){var t=e.article;return Object(j.jsxs)("article",{className:"card",children:[Object(j.jsx)("div",{className:"img",children:Object(j.jsx)("img",{src:t.image,alt:"art"})}),Object(j.jsxs)("article",{className:"info",children:[Object(j.jsx)("div",{className:"card-info city",children:Object(j.jsx)("h4",{children:t.city})}),Object(j.jsx)("div",{className:"card-info date",children:Object(j.jsx)("p",{children:t.createdAt})}),Object(j.jsx)("div",{className:"card-info price",children:Object(j.jsxs)("p",{children:[t.price," $"]})}),Object(j.jsx)("div",{className:"card-info likes",children:Object(j.jsxs)("i",{className:"fas fa-heart",children:[" ",t.liked.length," "]})}),Object(j.jsx)("div",{className:"data-buttons",children:Object(j.jsx)(f.b,{to:"/details/".concat(t._id),className:"details-btn",children:"Details"})})]})]})}c(97);function R(){var e=Object(a.useState)([]),t=Object(l.a)(e,2),c=t[0],s=t[1],r=Object(i.g)().search,n=T.a.parse(r).name,o=Object(a.useContext)(u).userData;return Object(a.useEffect)((function(){var e,t;return"clothes"===n||"animals"===n||"cars"===n?(t=n,fetch("".concat(B,"/products/").concat(t)).then((function(e){return e.json()}))).then((function(e){s(e.article)})).catch((function(e){console.log(e.message)})):"myArticles"===n?(e=o._id,fetch("".concat(B,"/products/userArticles/")+e).then((function(e){return e.json()}))).then((function(e){s(e.article)})).catch((function(e){console.log(e.message)})):fetch("".concat(B,"/products")).then((function(e){return e.json()})).then((function(e){s(e.article)})).catch((function(e){console.log(e.message)})),function(){s([])}}),[n,o._id]),Object(j.jsxs)("section",{className:"catalog",children:[Object(j.jsx)("h1",{className:"catalog-title",children:"All added Articles"}),Object(j.jsx)("article",{className:"cards",children:(null===c||void 0===c?void 0:c.length)>0?c.map((function(e){return Object(j.jsx)(K,{article:e},e._id)})):Object(j.jsx)("h1",{className:"sv-msg",children:"No Articles"})})]})}c(98);function V(){var e=Object(a.useContext)(u).userData,t=Object(a.useState)([]),c=Object(l.a)(t,2),s=c[0],r=c[1],n=Object(a.useState)(0),i=Object(l.a)(n,2),o=i[0],d=i[1];return Object(a.useEffect)((function(){var t;(t=e._id,fetch("".concat(B,"/products/userLikedCreatedArt/")+t).then((function(e){return e.json()}))).then((function(e){r(e.article,d(e.userArticle))}))}),[e._id]),Object(j.jsxs)("section",{className:"profile",children:[Object(j.jsxs)("div",{className:"profile-img-liks-section",children:[Object(j.jsx)("div",{className:"profile-img-section",children:Object(j.jsx)("img",{src:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAkGBxIQEg8QEBIPEBAWEBIQEBAQEBAQERARFxEWFhURExUYHSggGBolGxUTITEhJSkrLi4uFx8zODMsNygtOisBCgoKBQUFDgUFDisZExkrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrK//AABEIAOEA4QMBIgACEQEDEQH/xAAbAAEAAwEBAQEAAAAAAAAAAAAABAUGAwECB//EADcQAAIBAgMFBQcEAQUBAAAAAAABAgMRBCExBRJBUXEiMmGBkVJiobHB0eEGE0LwchSDorLxI//EABQBAQAAAAAAAAAAAAAAAAAAAAD/xAAUEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwD9xAAAAAAAAAZBxG0Yxyj2nz4fkCcRquNhHjd8o5lVWxMp955clkvQ4gWNTaj/AIxS6u5Hnjqj/lbokiMAOkq0nrKT82fDZ4APbn1GrJaSkujZ8ACRDGVF/J+dmd6e05fyin0yIAAuqWPhLjuv3vuSU76GcOlKtKHdbXhw9ANACvw+0k8pq3itCfGSeazXNAegAAAAAAAAAAAAAAAHLEYiMFd+S4s5YzFqGSzly5eLKepNyd27sDticXKeuUfZX15kcAAAAAAAAAAAAAAAAAAdsPiJQeTy4p6M4gC8wuKjU0yfGL+nMkGcjJrNZPmW2Cxu92ZZS4PhL8gTQAAAAAAAAAAIuNxW4rLvPTw8WdcTXUItvyXNlFUm5Nt5tgeSk27vN8WeAAAAAAAAAiYjaMIZd58o6ebAlgpqm1pvuqK63bOL2jV9r/jH7AX4KBbRq+18I/Y6w2tNaqMvKzAugQaG1ISyleD8c16k5MAAAAAAHp4ALfAYze7Mu9wftfkmmcTtmsnwLvBYn9xe8tV9QJAAAAAAGCDtSvux3Vq9egEHG4jflf8Aiso/cjgAAAAAAAN2zeS4sFZtnEWtTXHOXTggI2Px7neMbqHxl18PAhAAAAAAAAlYLGypu2seMfqiKANPTmpJSTunoz6KbY+ItLcej08JfkuQAAAAAAdcPWcJKS81zXI5ADRQkmk1o1dH0Vuyq+sH1j9UWQAAAChxVXfk5cNF04FrtCpuwfN9lef4uUgAAAAAAAAAzeLqb05v3nboskaVGVks31AAAAAAAAAAAD2ErNNappo08ZXSfNXMsabDrsQ/wj8kB0AAAAAAAB905uLUlqncv4STSa0aujOlvsqpeLjyfwf9YE0AAVm155xj4X/vxK4k7QlepLwsvREYAAAAAAAAAZvFxtOa95/M0hQ7VS/clbwv4OwEQAAAAAAAAAAIq9lzyNSkZzBpOcL5LeWpowAAAAAAAABM2XO07c0156/chnTDytKL95fMDQAADP13eUn7z+ZzPWeAAAAAAAAAfNWe7GT5Rb9EZhu+b14monG6a5pr1Rl2rZPUAAAAAAAAAAABosDUcqcG9bWfk7fQzpo8FDdpwXuq/V5/UDsAAAAAAAAAALv/AFQKn9wAc2eH3WVpSXvNfE+AAAAAAAAABXY7Zu83KGUtXHg34cmWIAywO2Op7tSa8bro8/qcQAAAAAAAfVOG81FcWl6gWOB2bfdnPTVR+V/sWwSAAAAAAAAAAAAdP2wWf+kAEDHxtUl1v6ojk/a8O1GXNW9P/SAAAAAAAAAAAAFbtjDXSmtVlLpzKg1JQbSw6hPLRq6XLmgIoAAAAAWWx8Nd/uPRZR8XxZDwdHfnGPDj0RooxSSSySySA9AAAAAAAAAAA+6MbyiuckvifBL2ZC80+Sb+n1AuQABF2lT3oPmu19ylNG1coK9Lck48nl04AcwAAAAAAAAAAKfbb7UP8fqXBn9o1d+pJrRdleX5uBGAAAAATNkP/wCi6P5F6ZrDVdycZcnn04/A0qYAAAAAAAAAAAC12TTtFy5uy6L+srIRbaS1bsi/pQ3UorgrAfYAAFftWhdKa4ZPpzLA8krpp6aMDOA7Yqg4Sa4ap80cQAAAAAADjXxUId5q/JZv0KrFbTlLKPZj/wAn58AJe0scopwi+1o2v4/kpgAAAAAAAWmzMclaE3b2ZP5MqwBqQUOE2hKGT7UeT1XRlth8bCejs/ZeT/IEgAAAAAAPulTcmorV/wBuBN2VQu3N6LJdS0PilTUUorRH2AAAAAAR8Zh/3I24rOL+hSSVm08nxNGQtoYTe7Ue8tV7S+4FQeSkkrtpLm8kVmK2ra6gvC8lb4fcrataU3eTb68OiAt6+1YR7t5v0XqV9faNSXHdXKOXx1IoAAAAAAAAAAAAAAB4egCRQx1SGjuuUs0WFDa0X304vms19ynAGnp1FJXi01zTufRmKdRxd4tp807Fhh9rNZVFde0sn5oC3LnZ+F3Fd95/BciPszC3SqPirxTVvNplmAAAAAAAAAAAFFt7YSq3qUrKpxjop/ZmQnBxbTTTTs01Zp8mfphW7W2PDEK/dqcJr5SXFAYQEnH4CpQlu1I25SWcZdGRgAAAAAAAAAAAAAAAAAB2wmFnVlu04uT8NEubfBAcTUbB2Ba1Wus9YU3w8ZePgTdj7ChRtOdp1ef8Yf4rn4/IuAAAAAAAAAAAAAAAAAPitRjNOM0pReqaujN7R/S+sqD/ANuT/wCsvv6mnAH5tiMPOm92pGUHyatfpzOZ+lVqMZrdnGMlykk0U2L/AExSlnBypvw7UfR5/EDHAucT+mq8e7uVF7rs/R/crq2Aqw71OovHddvXQCODwAeg8FwPQdqODqT7tOpLpGTXqWOH/TleWqjBe/L6K4FQfVKlKbUYpylwUU2zV4T9LU451JSqPkuxH7/Eu8NhoU1u04xgvBWv15gZjZ36YlK0qz3F7EbOT6vRfE02FwsKUd2nFRXhx8W+LOwAAAAAAAAAAAAAAAAAAAAAAAAAAACr2xp5GQxep4APnDao1exeAAF2AAAAAAAAAAAAAAAAAAP/2Q==",alt:"avatar-img"})}),Object(j.jsx)("div",{className:"uploadImg",children:Object(j.jsxs)("form",{action:"/action_page.php",children:[Object(j.jsx)("label",{htmlFor:"img",children:"Select image: "}),Object(j.jsx)("input",{type:"file",id:"img",name:"img",accept:"image/*"}),Object(j.jsx)("input",{className:"submitbtn",type:"submit"})]})}),Object(j.jsx)("div",{className:"profile-links-section",children:Object(j.jsx)("nav",{children:Object(j.jsxs)("ul",{className:"nav-links",children:[Object(j.jsx)("li",{children:Object(j.jsx)(f.b,{to:"/messages/".concat(e._id),children:"Messages"})}),Object(j.jsx)("li",{children:Object(j.jsx)(f.b,{to:"/messag/".concat(e),children:"Settings"})})]})})})]}),Object(j.jsxs)("div",{className:"profile-info",children:[Object(j.jsx)("div",{className:"profile-info-user",children:Object(j.jsxs)("div",{className:"user-info",children:[Object(j.jsx)("h1",{className:"user-info-title",children:"User-Info"}),Object(j.jsxs)("p",{className:"user-info-name",children:[Object(j.jsx)("span",{children:"Name"}),"  ",Object(j.jsx)("strong",{className:"data-span",children:e.username})]}),Object(j.jsxs)("p",{className:"user-info-email",children:[Object(j.jsx)("span",{children:"Email"})," ",Object(j.jsx)("strong",{className:"data-span",children:e.email})]}),Object(j.jsxs)("p",{className:"user-info-liked-art",children:[Object(j.jsx)("span",{children:"Created Articles"})," ",Object(j.jsx)("strong",{className:"data-span",children:o})]}),Object(j.jsxs)("p",{className:"user-info-created-art",children:[Object(j.jsx)("span",{children:"Liked Articles"})," ",Object(j.jsx)("strong",{className:"data-span",children:s.length})]})]})}),Object(j.jsxs)("div",{className:"profile-info-article",children:[Object(j.jsx)("h1",{className:"profile-article-title",children:"Last Liked Articles"}),(null===s||void 0===s?void 0:s.length)>0?s.map((function(e){return Object(j.jsx)(K,{article:e},e._id)})):Object(j.jsx)("p",{className:"no-liked-art",children:" No liked articles yet!"})]})]})]})}var z=c(26);c(99);function W(e){var t=e.data,c=e.currentUser;return Object(j.jsx)("div",{className:"msg-container",children:Object(j.jsxs)("div",{className:"msg-box",children:[Object(j.jsxs)("div",{className:"time-author",children:[t.userInfo.senderId===c?Object(j.jsx)("h3",{className:"msg-box-author",style:{color:"red"},children:"Me"}):Object(j.jsx)("h3",{className:"msg-box-author",children:t.userInfo.username}),Object(j.jsx)("p",{className:"msg-time",children:t.userInfo.time})]}),Object(j.jsxs)("div",{className:"msg-box-content",children:[Object(j.jsx)("div",{className:"msg-box-img",children:Object(j.jsx)("img",{src:t.artData.image,alt:"article-img"})}),Object(j.jsx)("div",{className:"msg-box-message",children:Object(j.jsx)("p",{className:"msg-box-message-content",children:t.userInfo.msg})}),Object(j.jsx)("div",{className:"msg-card-btn",children:Object(j.jsx)(f.b,{to:"/messages/".concat(t.artData.owner,"/").concat(t.artData._id,"/").concat(t.userInfo.senderId===c?t.userInfo.recieverId:t.userInfo.senderId),children:"more"})})]})]})})}c(100);function Z(){var e,t=Object(i.i)().userId,c=Object(a.useState)([]),s=Object(l.a)(c,2),r=s[0],n=s[1];return Object(a.useEffect)((function(){(function(e){return fetch("".concat(g,"/auth/getUserMessages/")+e,{credentials:"include"}).then((function(e){return e.json()}))})(t).then((function(e){n((function(t){return Object(z.a)(Object(z.a)({},t),{},{info:e.dataInfo})}))})).catch((function(e){console.log(e.message)}))}),[t]),Object(j.jsxs)("div",{className:"message-conrainer",children:[Object(j.jsx)("h1",{className:"message-container-title",children:"Messages"}),(null===(e=r.info)||void 0===e?void 0:e.length)>0?r.info.map((function(e){return Object(j.jsx)(W,{data:e,currentUser:t},e.documentId)})):Object(j.jsx)("h1",{className:"sv-msg",children:"No Messages yet"})]})}function G(e){var t=e.split("T");return t[0]+" / "+t[1].slice(0,-5)}c(101);function X(e){var t=e.recMesg,c=G(t.date);return Object(j.jsxs)("div",{className:"chat-msg-box-me",children:[Object(j.jsx)("div",{className:"chat-avatar-me",children:Object(j.jsx)("h4",{className:"chat-av-me",children:"Me"})}),Object(j.jsx)("p",{className:"chat-message-me",children:t.msg}),Object(j.jsx)("div",{className:"msg-time",children:c})]})}c(102);function J(e){var t=e.recMesg,c=G(t.date),a=t.username.slice(0,2).toUpperCase();return Object(j.jsxs)("div",{className:"chat-msg-box",children:[Object(j.jsx)("div",{className:"chat-avatar",children:Object(j.jsx)("h4",{className:"chat-av-name",children:a})}),Object(j.jsx)("p",{className:"chat-message",children:t.msg}),Object(j.jsx)("div",{className:"msg-time",children:c})]})}function _(e){var t=e.message,c=e.commentId,s=Object(a.useState)(!1),r=Object(l.a)(s,2),n=r[0],i=r[1];return Object(a.useEffect)((function(){if(t){i(!0);var e=setTimeout((function(){i(!1)}),2e3);return function(){return clearTimeout(e)}}i(!1)}),[c,t]),Object(j.jsx)(j.Fragment,{children:n?Object(j.jsx)("p",{style:{color:"green",fontSize:"12px"},children:t}):""})}c(103);function Y(){var e,t,c=Object(a.useContext)(u).userData,s=Object(i.i)([]),r=s.artId,n=s.senderId,o=Object(i.h)(),d=Object(a.useState)(),m=Object(l.a)(d,2),b=m[0],h=m[1],O=Object(a.useState)(),x=Object(l.a)(O,2),f=x[0],v=x[1],y=Object(a.useState)([]),N=Object(l.a)(y,2),w=N[0],S=N[1],D=Object(a.useState)(!1),q=Object(l.a)(D,2),I=q[0],C=q[1],E=Object(a.useState)({}),F=Object(l.a)(E,2),P=F[0],T=F[1];function B(){return(B=Object(p.a)(A.a.mark((function e(t){var a,s,r;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!((a=Object.fromEntries(new FormData(t.target))).message.length>5)){e.next=17;break}return s={username:c.username,mail:c.email,message:a.message,ownerId:n,userId:c._id,articleId:f._id},C(!1),e.prev=5,e.next=8,k(s);case 8:200===(r=e.sent).status&&(S({message:r.message}),T(r.msgId),C(!0),t.target.reset()),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(5),S(e.t0.message);case 15:e.next=19;break;case 17:C(!1),S({err:"The message must be large than 5 characters!"});case 19:case"end":return e.stop()}}),e,null,[[5,12]])})))).apply(this,arguments)}return Object(a.useEffect)((function(){(function(e,t){return fetch("".concat(g,"/auth/getAllMessagesForCurrentArticle/")+e+"/"+t,{credentials:"include"}).then((function(e){return e.json()}))})(r,n).then((function(e){200===e.status&&h(e)})).catch((function(e){console.log(e)}))}),[r,n,P]),Object(a.useEffect)((function(){M(r).then((function(e){v(e.article)})).catch((function(e){console.log(e.message)}))}),[r]),Object(j.jsxs)("div",{className:"discussion-container",children:[Object(j.jsxs)("div",{className:"discussion-article-info-img",children:[Object(j.jsx)("h3",{className:"discussion-article-info-title",children:"Article-Info"}),Object(j.jsx)("div",{className:"discussion-art-img",children:Object(j.jsx)("img",{src:null===f||void 0===f?void 0:f.image,alt:"artImage"})}),Object(j.jsx)("div",{className:"discussion-art-info",children:Object(j.jsxs)("ul",{className:"discussion-ul-items",children:[Object(j.jsxs)("li",{children:["City - ",null===f||void 0===f?void 0:f.city]}),Object(j.jsxs)("li",{children:["Year - ",(null===f||void 0===f?void 0:f.year)||(null===f||void 0===f?void 0:f.birthday)]}),Object(j.jsxs)("li",{children:["Likes - ",null===f||void 0===f||null===(e=f.liked)||void 0===e?void 0:e.length]}),Object(j.jsxs)("li",{children:["Price - ",null===f||void 0===f?void 0:f.price,"$"]})]})})]}),Object(j.jsxs)("div",{className:"chat-msg-container",children:[Object(j.jsx)("h3",{className:"dsc-chat-msg-title",children:"Chat"}),Object(j.jsx)("div",{className:"my-msg-stra",children:(null===b||void 0===b||null===(t=b.infoData)||void 0===t?void 0:t.length)>0?null===b||void 0===b?void 0:b.infoData.map((function(e){return e.myMessage?Object(j.jsx)(X,{recMesg:e},e.messageId):Object(j.jsx)(J,{recMesg:e},e.messageId)})):""}),Object(j.jsxs)("div",{className:"form-msg",children:[Object(j.jsxs)("form",{onSubmit:function(e){return B.apply(this,arguments)},children:[Object(j.jsx)("textarea",{name:"message",id:"txt-area",cols:"70",rows:"4",placeholder:"Your message..."}),Object(j.jsxs)("div",{className:"form-btn",children:[Object(j.jsx)("input",{className:"submit-btn",type:"submit",value:"Send"}),Object(j.jsx)("input",{className:"reset-btn",type:"reset",value:"Reset"})]})]}),I?Object(j.jsx)(_,{message:w.message}):Object(j.jsx)("p",{style:{color:"red",fontSize:"12px"},children:w.err})]})]}),Object(j.jsx)("div",{className:"del-discussion",children:Object(j.jsx)("button",{type:"button",onClick:function(){return function(e,t,c){return fetch("".concat(g,"/auth/deleteDiscussion"),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({artId:e,recieverId:t,senderId:c})}).then((function(e){return e.json()}))}(null===b||void 0===b?void 0:b.infoData[0].articleId,null===b||void 0===b?void 0:b.infoData[0].recieverId,null===b||void 0===b?void 0:b.infoData[0].senderId).then((function(e){return 200===e.status?o("/messages/".concat(c._id)):""}))},className:"del-discuss-btn",children:"Remove Discussion"})})]})}function H(){return Object(a.useContext)(u).userData?Object(j.jsx)(i.b,{}):Object(j.jsx)(i.a,{to:"/login"})}var $=c(2),ee=c(80),te=c.n(ee);function ce(e){return Object(j.jsx)("div",{className:te.a.errors,children:Object(j.jsx)("p",{children:e.children})})}c(106);function ae(e){var t=Object(a.useState)(!1),c=Object(l.a)(t,2),s=c[0],r=c[1];return Object(a.useEffect)((function(){if(e.serverError){r(!0);var t=setTimeout((function(){r(!1)}),5e3);return function(){return clearTimeout(t)}}r(!1)}),[e]),Object(j.jsx)(j.Fragment,{children:s?Object(j.jsx)("p",{className:"rgsServError",children:e.serverError}):""})}var se=c(5),re=/^[\w-]+@([\w-]+\.)+[\w-]{2,4}$/,ne=se.c().shape({username:se.e().min(5).max(20).required("Username is required!"),email:se.e().email("Wrong email").matches(re,"Invalid Email!").required("Email is required!"),password:se.e().min(4).max(15).required("Password is required!"),rePass:se.e().oneOf([se.d("password"),null],"Password must match!")}),ie=se.c().shape({email:se.e().email("Wrong email").matches(re,"Invalid Email!").required("Email is required!"),password:se.e().min(4).max(15).required("Password is required!")}),le=se.c().shape({message:se.e().min(10,"Minimum 10 character!").max(500,"Maximum 500 character!").required("")}),oe=se.c().shape({username:se.e().min(4).max(15).required("Name is required!"),comment:se.e().min(5,"Minimum 5 character!").max(500,"Maximum 500 character!").required("")});c(205);function je(){var e=Object(i.h)(),t=Object(a.useState)([]),c=Object(l.a)(t,2),s=c[0],r=c[1],n=Object(a.useContext)(u).setUserData;function o(){return(o=Object(p.a)(A.a.mark((function t(c){var a,s;return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={email:c.email,password:c.password},t.prev=1,t.next=4,y(a);case 4:404===(s=t.sent).status?r({error:s.message}):(n(s),e("/catalog")),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[1,8]])})))).apply(this,arguments)}return Object(j.jsx)("section",{className:"login",children:Object(j.jsxs)("div",{className:"login-box",children:[Object(j.jsx)("h1",{children:"Login"}),Object(j.jsx)("p",{className:"login-untertitle",children:"Please enter your email and password."}),Object(j.jsx)($.d,{initialValues:{username:"",email:"",password:"",rePass:""},validationSchema:ie,onSubmit:function(e){return o.apply(this,arguments)},children:Object(j.jsxs)($.c,{className:"login-form",children:[Object(j.jsx)("label",{htmlFor:"email",children:"Email"}),Object(j.jsx)($.b,{type:"email",id:"email",name:"email"}),Object(j.jsx)($.a,{name:"email",component:ce}),Object(j.jsx)("label",{htmlFor:"password",children:"Password"}),Object(j.jsx)($.b,{type:"password",id:"password",name:"password"}),Object(j.jsx)($.a,{name:"password",component:ce}),Object(j.jsx)("input",{type:"submit",className:"loginBtn",value:"Login"})]})}),void 0!==s.error?Object(j.jsx)(ae,{serverError:s.error}):"",Object(j.jsx)("div",{className:"signup",children:Object(j.jsxs)("p",{children:["Dont have an account? ",Object(j.jsx)(f.b,{to:"/register",children:"Sign up"}),"."]})})]})})}c(206);function de(){var e=Object(i.h)(),t=Object(a.useState)([]),c=Object(l.a)(t,2),s=c[0],r=c[1],n=Object(a.useContext)(u).setUserData;function o(){return(o=Object(p.a)(A.a.mark((function t(c){var a,s;return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={username:c.username,email:c.email,password:c.password,rePass:c.rePass},t.prev=1,t.next=4,v(a);case 4:404===(s=t.sent).status?r({error:s.message}):(n(s),e("/catalog")),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[1,8]])})))).apply(this,arguments)}return Object(j.jsx)("section",{className:"register",children:Object(j.jsxs)("div",{className:"register-box",children:[Object(j.jsx)("h1",{className:"register-box-title",children:"Register"}),Object(j.jsx)("p",{className:"register-untertitle",children:"Please fill in this form to create an account."}),Object(j.jsx)($.d,{initialValues:{username:"",email:"",password:"",rePass:""},validationSchema:ne,onSubmit:function(e){return o.apply(this,arguments)},children:Object(j.jsxs)($.c,{className:"register-form",children:[Object(j.jsx)("label",{htmlFor:"username",children:"Name"}),Object(j.jsx)($.b,{type:"text",id:"text",name:"username"}),Object(j.jsx)($.a,{name:"username",component:ce}),Object(j.jsx)("label",{htmlFor:"email",children:"Email"}),Object(j.jsx)($.b,{type:"email",id:"email",name:"email"}),Object(j.jsx)($.a,{name:"email",component:ce}),Object(j.jsx)("label",{htmlFor:"password",children:"Password"}),Object(j.jsx)($.b,{type:"password",id:"password",name:"password"}),Object(j.jsx)($.a,{name:"password",component:ce}),Object(j.jsx)("label",{htmlFor:"rePass",children:"Confirm-Password"}),Object(j.jsx)($.b,{type:"password",id:"rePass",name:"rePass"}),Object(j.jsx)($.a,{name:"rePass",component:ce}),Object(j.jsx)("input",{type:"submit",className:"registerbtn",value:"Register"})]})}),void 0!==s.error?Object(j.jsx)(ae,{serverError:s.error}):"",Object(j.jsx)("div",{className:"signin",children:Object(j.jsxs)("p",{children:["Already have an account?",Object(j.jsx)(f.b,{to:"/login",children:"Sign in"}),"."]})})]})})}var me=c.p+"static/media/notfound.38ddf68e.png";c(207);function ue(){return Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)("div",{className:"wrong-page",children:[Object(j.jsx)("img",{className:"not-found-img",src:me,alt:"not-found-page"}),Object(j.jsx)("h2",{className:"wrong-page-title",children:"Page not found"})]})})}c(208);var be=se.c().shape({marke:se.e().required("Marke is required!"),model:se.e().required("Model is required!"),year:se.a("Invalid Date!").min(1950).max(2021).required("Date is required!"),city:se.e().required("City is required!"),image:se.e().matches(/^https?:\/\//,["The Home Image should starts with http:// or https://."]).required("Image is required!"),price:se.b("Price must be positive number!").min(1).required("Price is required!"),description:se.e().required("Description is required!").max(1e3,"Description should be a maximum of 1000 characters long")}),he=se.c().shape({animalName:se.e().min(4).max(15).required("Name is required!"),type:se.e().required("Type is required!"),birthday:se.a().min(1960).max(2021).required("Date is required!"),city:se.e().required("City is required!"),image:se.e().required("Image is required!"),price:se.b("Price must be positive number!").min(1).required("Price is required!"),description:se.e().required("Description is required!").max(1e3,"Description should be a maximum of 1000 characters long")}),Oe=se.c().shape({marke:se.e().max(15).required("Marke is required!"),type:se.e().required("Type is required!"),size:se.e().required("Size is required!"),year:se.a().min(1960).max(2021).required("Date is required!"),city:se.e().required("City is required!"),image:se.e().required("Image is required!"),price:se.b("Price must be positive number!").min(1).required("Price is required!"),description:se.e().required("Description is required!").max(1e3,"Description should be a maximum of 1000 characters long")});function xe(e){var t=e.data;return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("label",{htmlFor:"city",children:"City"}),Object(j.jsx)($.b,{type:"text",id:"city",name:"city"}),Object(j.jsx)($.a,{name:"city",component:ce}),Object(j.jsx)("label",{htmlFor:"image",children:"Image"}),Object(j.jsx)($.b,{type:"text",id:"image",name:"image"}),Object(j.jsx)($.a,{name:"image",component:ce}),Object(j.jsx)("label",{htmlFor:"price",children:"Price"}),Object(j.jsx)($.b,{type:"number",id:"price",name:"price"}),Object(j.jsx)($.a,{name:"price",component:ce}),Object(j.jsx)("label",{htmlFor:"description",children:"Description"}),Object(j.jsx)($.b,{as:"textarea",id:"description",name:"description",rows:"4",cols:"50"}),Object(j.jsx)($.a,{name:"description",component:ce}),t.price?Object(j.jsx)("input",{type:"submit",className:"createArtBtn",value:"Edit Article"}):Object(j.jsx)("input",{type:"submit",className:"createArtBtn",value:"Create Article"})]})}function Ae(e){var t=function(e){return e.artData?{animalName:e.artData.animalName,type:e.artData.type,birthday:e.artData.birthday,city:e.artData.city,image:e.artData.image,price:e.artData.price,description:e.artData.description}:{animalName:"",type:"",birthday:"",city:"",image:"",price:"",description:""}}(e),c=Object(i.h)(),a=function(){var e=Object(p.a)(A.a.mark((function e(t){var a,s;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={animalName:t.animalName,type:t.type,birthday:t.birthday,city:t.city,image:t.image,price:t.price,description:t.description,category:"animals"},e.prev=1,e.next=4,U(a);case 4:if(404!==(s=e.sent).status){e.next=9;break}throw new Error(s.message);case 9:c("/catalog");case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.log(e.t0.message);case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}(),s=function(){var t=Object(p.a)(A.a.mark((function t(a){var s,r;return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s={animalName:a.animalName,type:a.type,birthday:a.birthday,city:a.city,image:a.image,price:a.price,description:a.description,category:"animals"},t.prev=1,t.next=4,Q(e.artId,s);case 4:if(404!==(r=t.sent).status){t.next=9;break}throw new Error(r.message);case 9:c("/catalog");case 10:t.next=15;break;case 12:t.prev=12,t.t0=t.catch(1),console.log(t.t0.message);case 15:case"end":return t.stop()}}),t,null,[[1,12]])})));return function(e){return t.apply(this,arguments)}}();return Object(j.jsx)(j.Fragment,{children:Object(j.jsx)($.d,{initialValues:t,validationSchema:he,onSubmit:t.price?s:a,children:Object(j.jsxs)($.c,{children:[Object(j.jsx)("label",{htmlFor:"animalName",children:"Name"}),Object(j.jsx)($.b,{type:"text",id:"animalName",name:"animalName"}),Object(j.jsx)($.a,{name:"animalName",component:ce}),Object(j.jsx)("label",{htmlFor:"type",children:"Type"}),Object(j.jsx)($.b,{type:"text",id:"type",name:"type"}),Object(j.jsx)($.a,{name:"type",component:ce}),Object(j.jsx)("label",{htmlFor:"birthday",children:"Birthday"}),Object(j.jsx)($.b,{type:"date",id:"birthday",name:"birthday"}),Object(j.jsx)($.a,{name:"birthday",component:ce}),Object(j.jsx)(xe,{data:t})]})})})}function pe(e){var t=function(e){return e.artData?{marke:e.artData.marke,model:e.artData.model,year:e.artData.year,city:e.artData.city,image:e.artData.image,price:e.artData.price,description:e.artData.description}:{marke:"",model:"",year:"",city:"",image:"",price:"",description:""}}(e),c=Object(i.h)(),a=function(){var e=Object(p.a)(A.a.mark((function e(t){var a,s;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={marke:t.marke,model:t.model,year:t.year,city:t.city,image:t.image,price:t.price,description:t.description,category:"cars"},e.prev=1,e.next=4,U(a);case 4:if(404!==(s=e.sent).status){e.next=9;break}throw new Error(s.message);case 9:c("/catalog");case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.log(e.t0.message);case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}(),s=function(){var t=Object(p.a)(A.a.mark((function t(a){var s,r;return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s={marke:a.marke,model:a.model,year:a.year,city:a.city,image:a.image,price:a.price,description:a.description,category:"cars"},t.prev=1,t.next=4,Q(e.artId,s);case 4:if(404!==(r=t.sent).status){t.next=9;break}throw new Error(r.message);case 9:c("/catalog");case 10:t.next=15;break;case 12:t.prev=12,t.t0=t.catch(1),console.log(t.t0.message);case 15:case"end":return t.stop()}}),t,null,[[1,12]])})));return function(e){return t.apply(this,arguments)}}();return Object(j.jsx)(j.Fragment,{children:Object(j.jsx)($.d,{initialValues:t,validationSchema:be,onSubmit:t.price?s:a,children:Object(j.jsxs)($.c,{children:[Object(j.jsx)("label",{htmlFor:"marke",children:"Marke"}),Object(j.jsx)($.b,{type:"text",id:"marke",name:"marke"}),Object(j.jsx)($.a,{name:"marke",component:ce}),Object(j.jsx)("label",{htmlFor:"model",children:"Model"}),Object(j.jsx)($.b,{type:"text",id:"model",name:"model"}),Object(j.jsx)($.a,{name:"model",component:ce}),Object(j.jsx)("label",{htmlFor:"year",children:"Year"}),Object(j.jsx)($.b,{type:"date",id:"year",name:"year"}),Object(j.jsx)($.a,{name:"year",component:ce}),Object(j.jsx)(xe,{data:t})]})})})}function fe(e){var t=function(e){return e.artData?{marke:e.artData.marke,type:e.artData.type,size:e.artData.size,year:e.artData.year,city:e.artData.city,image:e.artData.image,price:e.artData.price,description:e.artData.description}:{marke:"",type:"",size:"",year:"",city:"",image:"",price:"",description:""}}(e),c=Object(i.h)(),a=function(){var e=Object(p.a)(A.a.mark((function e(t){var a,s;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={marke:t.marke,type:t.type,size:t.size,year:t.year,city:t.city,image:t.image,price:t.price,description:t.description,category:"clothes"},e.prev=1,e.next=4,U(a);case 4:if(404!==(s=e.sent).status){e.next=9;break}throw new Error(s.message);case 9:c("/catalog");case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.log(e.t0.message);case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}(),s=function(){var t=Object(p.a)(A.a.mark((function t(a){var s,r;return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s={marke:a.marke,type:a.type,size:a.size,year:a.year,city:a.city,image:a.image,price:a.price,description:a.description,category:"clothes"},t.prev=1,t.next=4,Q(e.artId,s);case 4:if(404!==(r=t.sent).status){t.next=9;break}throw new Error(r.message);case 9:c("/catalog");case 10:t.next=15;break;case 12:t.prev=12,t.t0=t.catch(1),console.log(t.t0.message);case 15:case"end":return t.stop()}}),t,null,[[1,12]])})));return function(e){return t.apply(this,arguments)}}();return Object(j.jsx)(j.Fragment,{children:Object(j.jsx)($.d,{initialValues:t,validationSchema:Oe,onSubmit:t.price?s:a,children:Object(j.jsxs)($.c,{children:[Object(j.jsx)("label",{htmlFor:"marke",children:"Marke"}),Object(j.jsx)($.b,{type:"text",id:"marke",name:"marke"}),Object(j.jsx)($.a,{name:"marke",component:ce}),Object(j.jsx)("label",{htmlFor:"type",children:"Type"}),Object(j.jsx)($.b,{type:"text",id:"type",name:"type"}),Object(j.jsx)($.a,{name:"type",component:ce}),Object(j.jsx)("label",{htmlFor:"size",children:"Size"}),Object(j.jsx)($.b,{type:"string",id:"size",name:"size"}),Object(j.jsx)($.a,{name:"size",component:ce}),Object(j.jsx)("label",{htmlFor:"year",children:"Produced on:"}),Object(j.jsx)($.b,{type:"date",id:"year",name:"year"}),Object(j.jsx)($.a,{name:"year",component:ce}),Object(j.jsx)(xe,{data:t})]})})})}function ge(){var e,t=Object(a.useState)(""),c=Object(l.a)(t,2),s=c[0],r=c[1];return""!==s&&(e={cars:Object(j.jsx)(pe,{}),animals:Object(j.jsx)(Ae,{}),clothings:Object(j.jsx)(fe,{})}[s]),Object(j.jsx)("section",{className:"create-article",children:Object(j.jsxs)("div",{className:"create-article-box",children:[Object(j.jsxs)("div",{className:"create-art-text",children:[Object(j.jsx)("h1",{className:"art-title",children:"Create Article"}),Object(j.jsx)("p",{className:"create-art-untertitle",children:"Please fill in this form to create an article."})]}),Object(j.jsxs)("form",{children:[Object(j.jsx)("label",{htmlFor:"category",children:"Choose a category:"}),Object(j.jsxs)("select",{name:"category",id:"category",onChange:function(e){e.preventDefault(),r(e.target.value)},children:[Object(j.jsx)("option",{value:""}),Object(j.jsx)("option",{value:"cars",children:"Cars"}),Object(j.jsx)("option",{value:"animals",children:"Animals"}),Object(j.jsx)("option",{value:"clothings",children:"Clothing"})]})]}),e]})})}var ve=c(84);c(212),c(213),c(214);function ye(e){var t=e.artOwnerName,c=Object(a.useContext)(O).currentArt,s=Object(a.useContext)(u).userData,r=Object(a.useState)([]),n=Object(l.a)(r,2),i=n[0],o=n[1],d=Object(a.useState)(!1),m=Object(l.a)(d,2),b=m[0],h=m[1];function x(){return(x=Object(p.a)(A.a.mark((function e(t,a){var r,n,i;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.resetForm,n={username:s.username,mail:s.email,message:t.message,ownerId:c.owner,userId:s._id,articleId:c._id},h(!1),e.prev=3,e.next=6,k(n);case 6:200===(i=e.sent).status&&(o({message:i.message}),h(!0)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),o(e.t0.message);case 13:r({value:""});case 14:case"end":return e.stop()}}),e,null,[[3,10]])})))).apply(this,arguments)}return Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)("article",{className:"message-box",children:[Object(j.jsxs)("h4",{className:"box-title",children:["Send message to ",Object(j.jsx)("span",{children:t})]}),Object(j.jsx)($.d,{initialValues:{message:""},validationSchema:le,onSubmit:function(e,t){return x.apply(this,arguments)},children:Object(j.jsxs)($.c,{className:"form",children:[Object(j.jsx)("label",{htmlFor:"username",children:"Name"}),Object(j.jsx)($.b,{type:"text",id:"text-msg",name:"username",value:s.username}),Object(j.jsx)("label",{htmlFor:"email",children:"Email"}),Object(j.jsx)($.b,{type:"email",id:"email-msg",name:"email",value:s.email}),Object(j.jsx)("label",{htmlFor:"message",children:"Message"}),Object(j.jsx)($.b,{as:"textarea",id:"message-area",name:"message",rows:"4",cols:"50"}),Object(j.jsx)($.a,{name:"message",component:ce}),Object(j.jsxs)("div",{className:"form-btn",children:[Object(j.jsx)("input",{className:"submit-btn",type:"submit",value:"Send"}),Object(j.jsx)("input",{className:"reset-btn",type:"reset",value:"Reset"})]})]})}),b?Object(j.jsx)(_,{message:i.message}):""]})})}c(215);function Ne(e){var t=e.comment;return Object(j.jsxs)("div",{className:"comment-container",children:[Object(j.jsx)("p",{className:"comment title",children:t.username}),Object(j.jsx)("p",{className:"comment text",children:t.comment}),Object(j.jsx)("p",{className:"comment time",children:t.time})]})}c(216);function ke(e){var t=e.category,c=Object(a.useContext)(u).userData,s=Object(i.i)().artId,r=Object(a.useState)([]),n=Object(l.a)(r,2),o=n[0],d=n[1],m=Object(a.useState)(!1),b=Object(l.a)(m,2),h=b[0],O=b[1],x=Object(a.useState)(""),f=Object(l.a)(x,2),g=f[0],v=f[1],y=Object(a.useState)(""),N=Object(l.a)(y,2),k=N[0],w=N[1];Object(a.useEffect)((function(){var e;(e=s,fetch("".concat(B,"/products/details/comments/")+e).then((function(e){return e.json()}))).then((function(e){return d(e.comments)})).catch((function(e){console.log(e.message)}))}),[s,g]);var S=function(){var e=Object(p.a)(A.a.mark((function e(c,a){var r,n,i;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.resetForm,n={artId:s,username:c.username,comment:c.comment,category:t},e.prev=2,e.next=5,L(n);case 5:if(200===(i=e.sent).status){e.next=8;break}throw new Error(i.message);case 8:w(i.message),v(i._id),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),console.log(e.t0.message);case 15:r({value:""});case 16:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(t,c){return e.apply(this,arguments)}}();return Object(j.jsxs)("div",{className:"comments-box",children:[Object(j.jsx)("h2",{className:"comments-title",children:"Comments"}),c?Object(j.jsx)($.d,{initialValues:{username:"",comment:""},validationSchema:oe,onSubmit:S,children:Object(j.jsxs)($.c,{className:"comment-form",children:[Object(j.jsx)($.b,{type:"text",id:"inp-name",name:"username",placeholder:"Name ..."}),Object(j.jsx)($.a,{name:"username",component:ce}),Object(j.jsx)($.b,{as:"textarea",id:"comment-area",name:"comment",placeholder:"Comment ...",rows:"4",cols:"100"}),Object(j.jsx)($.a,{name:"comment",component:ce}),Object(j.jsx)("input",{type:"submit",id:"cm-submit",value:"Post Comment"})]})}):"",Object(j.jsx)(_,{message:k,commentId:g}),Object(j.jsxs)("div",{className:"cmt-container",children:[o.length>0?Object(j.jsx)("button",{className:"show-hide-comments",onClick:function(e){e.preventDefault(),O(!h)},children:h?"Hide Comments":"Show Comments"}):"",h?o.map((function(e){return Object(j.jsx)(Ne,{comment:e},e._id)})):""]})]})}function we(){var e,t,c=Object(a.useContext)(u).userData,s=Object(a.useContext)(O).setCurrentArt,r=Object(a.useState)({}),n=Object(l.a)(r,2),o=n[0],d=n[1],m=Object(a.useState)({}),b=Object(l.a)(m,2),h=b[0],x=b[1],g=Object(a.useState)([]),v=Object(l.a)(g,2),y=v[0],N=v[1],k=Object(a.useState)(!1),w=Object(l.a)(k,2),S=w[0],D=w[1],q=Object(i.h)(),I=Object(i.i)().artId;Object(a.useEffect)((function(){M(I).then((function(e){return d(e.article,x(e.owner),N((function(t){return Object(z.a)(Object(z.a)({},t),{},{like:e.article.liked})})))}))}),[I,S]),Object(a.useEffect)((function(){s(o)}),[s,o]);var C=function(){(function(e){return fetch("".concat(B,"/products/likeArt"),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(e)}).then((function(e){return e.json()}))})({artId:I,userId:c._id,category:o.category}).then((function(e){200===e.status&&D(!0),D(!1)})).catch((function(e){console.log(e.message)}))};return Object(j.jsxs)("section",{className:"details",children:[Object(j.jsx)("h1",{className:"details-title",children:"Details"}),Object(j.jsxs)("article",{className:"details-info",children:[Object(j.jsx)("div",{className:"details-info-img",children:Object(j.jsx)("img",{src:o.image,alt:"img-details"})}),Object(j.jsx)("p",{className:"details-text",children:o.description})]}),Object(j.jsxs)("article",{className:"article-info",children:[Object(j.jsxs)("ul",{className:"art-info-items",children:["animals"===o.category?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("li",{children:[Object(j.jsx)("strong",{children:"Name"}),"  ",o.animalName]}),Object(j.jsxs)("li",{children:[Object(j.jsx)("strong",{children:"Type"}),"  ",o.type]}),Object(j.jsxs)("li",{children:[Object(j.jsx)("strong",{children:"Birthday"}),"  ",o.birthday]})]}):"","cars"===o.category?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("li",{children:[Object(j.jsx)("strong",{children:"Marke"}),"  ",o.marke]}),Object(j.jsxs)("li",{children:[Object(j.jsx)("strong",{children:"Model"}),"  ",o.model]}),Object(j.jsxs)("li",{children:[Object(j.jsx)("strong",{children:"Year"}),"  ",o.year]})]}):"","clothes"===o.category?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("li",{children:[Object(j.jsx)("strong",{children:"Marke"}),"  ",o.marke]}),Object(j.jsxs)("li",{children:[Object(j.jsx)("strong",{children:"Type"}),"  ",o.type]}),Object(j.jsxs)("li",{children:[Object(j.jsx)("strong",{children:"Year"}),"  ",o.year]})]}):"",Object(j.jsxs)("li",{children:[Object(j.jsx)("strong",{children:"Category"}),"  ",o.category]}),Object(j.jsxs)("li",{children:[Object(j.jsx)("strong",{children:"City"}),"  ",o.city]}),Object(j.jsxs)("li",{children:[Object(j.jsx)("strong",{children:"Date of publication"}),"  ",o.createdAt]}),Object(j.jsxs)("li",{children:[Object(j.jsx)("strong",{children:"Price"}),"  $",o.price]}),c?Object(j.jsxs)("div",{className:"seler-info",children:[Object(j.jsxs)("li",{children:[Object(j.jsx)("strong",{children:"Seller"}),"  ",h.username]}),Object(j.jsxs)("li",{children:[Object(j.jsx)("strong",{children:"Email"}),"  ",h.email]})]}):""]}),c&&c._id!==h._id?Object(j.jsx)(ye,{artOwnerName:h.username}):""]}),Object(j.jsx)("article",{className:"likes-dtl",children:Object(j.jsxs)("p",{className:"likes-count",children:["Likes ",null===(e=y.like)||void 0===e?void 0:e.length]})}),c?Object(j.jsxs)("article",{className:"buttons",children:[c._id===o.owner?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(f.b,{to:"/edit/".concat(I),className:"button edit",children:"Edit"}),Object(j.jsx)(f.b,{to:"#",onClick:function(){return function(e){Object(ve.confirmAlert)({title:"Confirm to submit",message:"Are you sure to do this.",buttons:[{label:"Yes",onClick:function(){var t=Object(p.a)(A.a.mark((function t(){return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(c=e,fetch("".concat(B,"/products/deleteArt/")+c,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include"}).then((function(e){return e.json()}))).then((function(e){if(200!==e.status)throw new Error("Failed to delete!");q("/catalog")}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}var c}),t)})));return function(){return t.apply(this,arguments)}}()},{label:"No"}]})}(I)},className:"button del",children:"Delete"})]}):(null===(t=y.like)||void 0===t?void 0:t.includes(c._id))?"":Object(j.jsx)(f.b,{to:"#",onClick:function(){return C()},className:"button like",children:"Like"}),Object(j.jsx)(f.b,{to:"/catalog",className:"button back",children:"Back"})]}):"",Object(j.jsx)(ke,{category:o.category})]})}c(217);function Se(){var e=Object(a.useState)([]),t=Object(l.a)(e,2),c=t[0],s=t[1],r=Object(i.i)().artId;Object(a.useEffect)((function(){M(r).then((function(e){return s(e.article)})).catch((function(e){console.log(e.message)}))}),[r]);var n={cars:Object(j.jsx)(pe,{artData:c,artId:r}),animals:Object(j.jsx)(Ae,{artData:c,artId:r}),clothes:Object(j.jsx)(fe,{artData:c,artId:r})};return Object(j.jsx)("section",{className:"edit-article",children:Object(j.jsxs)("div",{className:"edit-article-box",children:[Object(j.jsx)("div",{className:"edit-art-text",children:Object(j.jsx)("h1",{className:"art-title",children:"Edit Article"})}),n[c.category]]})})}function De(){var e=Object(a.useContext)(u).userData,t=Object(a.useContext)(O).currentArt;return e._id===t.owner?Object(j.jsx)(i.b,{}):Object(j.jsx)(i.a,{to:"/"})}var qe=function(){return Object(j.jsx)(j.Fragment,{children:Object(j.jsx)(m,{children:Object(j.jsxs)(h,{children:[Object(j.jsx)(w,{}),Object(j.jsx)("section",{className:"container",children:Object(j.jsxs)(i.e,{children:[Object(j.jsx)(i.c,{path:"/",element:Object(j.jsx)(F,{})}),Object(j.jsx)(i.c,{path:"/catalog",element:Object(j.jsx)(R,{})}),Object(j.jsx)(i.c,{path:"/login",element:Object(j.jsx)(je,{})}),Object(j.jsx)(i.c,{path:"/register",element:Object(j.jsx)(de,{})}),Object(j.jsx)(i.c,{path:"details/:artId",element:Object(j.jsx)(we,{})}),Object(j.jsxs)(i.c,{element:Object(j.jsx)(H,{}),children:[Object(j.jsx)(i.c,{path:"/create",element:Object(j.jsx)(ge,{})}),Object(j.jsx)(i.c,{path:"/profile",element:Object(j.jsx)(V,{})}),Object(j.jsx)(i.c,{path:"/messages/:userId",element:Object(j.jsx)(Z,{})}),Object(j.jsx)(i.c,{path:"/messages/:userId/:artId/:senderId",element:Object(j.jsx)(Y,{})}),Object(j.jsx)(i.c,{element:Object(j.jsx)(De,{}),children:Object(j.jsx)(i.c,{path:"/edit/:artId",element:Object(j.jsx)(Se,{})})})]}),Object(j.jsx)(i.c,{path:"*",element:Object(j.jsx)(ue,{})})]})}),Object(j.jsx)(C,{})]})})})},Ie=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,219)).then((function(t){var c=t.getCLS,a=t.getFID,s=t.getFCP,r=t.getLCP,n=t.getTTFB;c(e),a(e),s(e),r(e),n(e)}))};n.a.render(Object(j.jsx)(s.a.StrictMode,{children:Object(j.jsx)(f.a,{children:Object(j.jsx)(qe,{})})}),document.getElementById("root")),Ie()},80:function(e,t,c){e.exports={errors:"Notification_errors__2lEkV"}},89:function(e,t,c){},92:function(e,t,c){},93:function(e,t,c){},94:function(e,t,c){},96:function(e,t,c){},97:function(e,t,c){},98:function(e,t,c){},99:function(e,t,c){}},[[218,1,2]]]);
//# sourceMappingURL=main.0c3578ae.chunk.js.map